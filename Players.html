<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Man Utd</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <script src="API-football-data.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <section id="header">

        <a id="navbar" href="index.html"><img src="Images/ManchesterUnitedLogo.png" width="80px" height="80px"
                class="Logo" alt="Team Logo"></a>
        <div>
            <ul id="navbar">
                <li><a class="active" href="index.html">Home</a></li>
                <li><a href="Shop.html">Shop</a></li>
                <li><a href="Tickets.html">Tickets</a></li>
                <li><a href="News.html">News</a></li>
                <li><a href="Players.html">Players</a></li>
                <li><a href="About.html">About</a></li>
                <li><a href="SignIn.html"><img src="Images/ProfileDefault.png" width="30px" height="30px"
                            alt="Profile Logo"></a></li>
            </ul>
        </div>

    </section>

    <section id="players">
        <h1 class="top-header" style="font-size: 5em;">The Red Devils</h1>
        <hr>
        <div class="top-players-cards">
            <h2 id="headertext" style="font-size: 3em;"> Goalkeepers</h2>
            <div class="cards-container" id="gk-cardsContainer">

            </div>
        </div>
        <div class="top-players-cards">
            <h2 id="headertext" style="font-size: 3em;"> Defenders</h2>
            <div class="cards-container" id="def-cardsContainer">

            </div>
        </div>
        <div class="top-players-cards">
            <h2 id="headertext" style="font-size: 3em;"> Midfielders</h2>
            <div class="cards-container" id="mid-cardsContainer">

            </div>
        </div>
        <div class="top-players-cards">
            <h2 id="headertext" style="font-size: 3em;"> Attackers</h2>
            <div class="cards-container" id="att-cardsContainer">

            </div>
        </div>
        <div class="top-players-cards">
            <h2 id="headertext" style="font-size: 3em;"> Head coach</h2>
            <div class="cards-container" id="coach-cardsContainer">

            </div>
        </div>
    </section>


    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col">
                    <h4>Account</h4>
                    <ul>
                        <li><a id="login-footer" href="SignIn.html">Login</a></li>
                        <li><a id="login-footer" href="SignIn.html">Sign up</a></li>
                        <li><a href="#">privacy policy</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Accessibility</h4>
                    <ul>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="About.html">History</a></li>
                        <li><a href="About.html">Old Trafford</a></li>
                        <li><a href="About.html">Legends</a></li>
                        <li><a href="More.html">Matches</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>online shop</h4>
                    <ul>
                        <li><a href="Tickets.html">Tickets</a></li>
                        <li><a href="Shop.html">Merch</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>follow us</h4>
                    <div class="social-links">
                        <a href="https://www.facebook.com/manchesterunited"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com/ManUtd"><i class="fab fa-x"></i></a>
                        <a href="http://instagram.com/manchesterunited"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.youtube.com/manutd"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        function fetchAllPlayers() {
            fetch('https://v3.football.api-sports.io/players/squads?team=33', {
                "method": "GET",
                "headers": {
                    "x-rapidapi-host": "v3.football.api-sports.io",
                    "x-rapidapi-key": "19ca6ef50amshb9e9bbbc427749ap1b1644jsn062d3ee"
                }
            }).then(response => response.json())
                .then(data => {
                    const players = data.response[0].players;
                    fetchGoalkeepers(players);
                    fetchDefenders(players);
                    fetchMidfielders(players);
                    fetchAttackers(players);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }







        // Fetch goalkeepers
        function fetchGoalkeepers(players) {

            const goalkeepers = players.filter(player => player.position === "Goalkeeper");

            const cardsContainer = document.getElementById('gk-cardsContainer');
            for (let i = 0; i < goalkeepers.length; i++) {
                const player = goalkeepers[i];
                const age = player.age;
                const playerId = player.id;
                const imageUrl = `Images/Players/${playerId}.png`;

                const minip = document.createElement('div');
                minip.classList.add('minip');

                const mg = document.createElement('div');
                mg.classList.add('mg');

                const clr = document.createElement('div');
                clr.classList.add('clr');

                const group = document.createElement('div');
                group.classList.add('group');

                const span = document.createElement('span');

                const av = document.createElement('div');
                av.classList.add('av');
                av.style.backgroundImage = `url('${imageUrl}')`;

                const info = document.createElement('div');
                info.classList.add('info');

                const name = document.createElement('name');
                name.innerText = player.name;

                const deets = document.createElement('deets');
                deets.innerHTML = `Age: ${age}<br>number: ${player.number}`;

                group.appendChild(span);
                mg.appendChild(clr);
                mg.appendChild(group);
                minip.appendChild(mg);
                minip.appendChild(av);
                info.appendChild(name);
                info.appendChild(deets);
                minip.appendChild(info);

                cardsContainer.appendChild(minip);
            }
        }




        // Fetch defenders
        function fetchDefenders(players) {

            const defenders = players.filter(player => player.position === "Defender");

            const cardsContainer = document.getElementById('def-cardsContainer');
            for (let i = 0; i < defenders.length; i++) {
                const player = defenders[i];
                const age = player.age;
                const playerId = player.id;
                const imageUrl = `Images/Players/${playerId}.png`;

                const minip = document.createElement('div');
                minip.classList.add('minip');

                const mg = document.createElement('div');
                mg.classList.add('mg');

                const clr = document.createElement('div');
                clr.classList.add('clr');

                const group = document.createElement('div');
                group.classList.add('group');

                const span = document.createElement('span');

                const av = document.createElement('div');
                av.classList.add('av');
                av.style.backgroundImage = `url('${imageUrl}')`;

                const info = document.createElement('div');
                info.classList.add('info');

                const name = document.createElement('name');
                name.innerText = player.name;

                const deets = document.createElement('deets');
                deets.innerHTML = `Age: ${age}<br>number: ${player.number}`;

                group.appendChild(span);
                mg.appendChild(clr);
                mg.appendChild(group);
                minip.appendChild(mg);
                minip.appendChild(av);
                info.appendChild(name);
                info.appendChild(deets);
                minip.appendChild(info);

                cardsContainer.appendChild(minip);
            }

        }




        // Fetch Midfielders
        function fetchMidfielders(players) {

            const midfielders = players.filter(player => player.position === "Midfielder");

            const cardsContainer = document.getElementById('mid-cardsContainer');
            for (let i = 0; i < midfielders.length; i++) {
                const player = midfielders[i];
                const age = player.age;
                const playerId = player.id;
                const imageUrl = `Images/Players/${playerId}.png`;

                const minip = document.createElement('div');
                minip.classList.add('minip');

                const mg = document.createElement('div');
                mg.classList.add('mg');

                const clr = document.createElement('div');
                clr.classList.add('clr');

                const group = document.createElement('div');
                group.classList.add('group');

                const span = document.createElement('span');

                const av = document.createElement('div');
                av.classList.add('av');
                av.style.backgroundImage = `url('${imageUrl}')`;

                const info = document.createElement('div');
                info.classList.add('info');

                const name = document.createElement('name');
                name.innerText = player.name;

                const deets = document.createElement('deets');
                deets.innerHTML = `Age: ${age}<br>number: ${player.number}`;

                group.appendChild(span);
                mg.appendChild(clr);
                mg.appendChild(group);
                minip.appendChild(mg);
                minip.appendChild(av);
                info.appendChild(name);
                info.appendChild(deets);
                minip.appendChild(info);

                cardsContainer.appendChild(minip);
            }

        }



        // Fetch attackers
        function fetchAttackers(players) {

            const attackers = players.filter(player => player.position === "Attacker");

            const cardsContainer = document.getElementById('att-cardsContainer');
            for (let i = 0; i < attackers.length; i++) {
                const player = attackers[i];
                const age = player.age;
                const playerId = player.id;
                const imageUrl = `Images/Players/${playerId}.png`;

                const minip = document.createElement('div');
                minip.classList.add('minip');

                const mg = document.createElement('div');
                mg.classList.add('mg');

                const clr = document.createElement('div');
                clr.classList.add('clr');

                const group = document.createElement('div');
                group.classList.add('group');

                const span = document.createElement('span');

                const av = document.createElement('div');
                av.classList.add('av');
                av.style.backgroundImage = `url('${imageUrl}')`;

                const info = document.createElement('div');
                info.classList.add('info');

                const name = document.createElement('name');
                name.innerText = player.name;

                const deets = document.createElement('deets');
                deets.innerHTML = `Age: ${age}<br>number: ${player.number}`;

                group.appendChild(span);
                mg.appendChild(clr);
                mg.appendChild(group);
                minip.appendChild(mg);
                minip.appendChild(av);
                info.appendChild(name);
                info.appendChild(deets);
                minip.appendChild(info);

                cardsContainer.appendChild(minip);
            }

        }




        // Fetch coach
        function fetchCoach() {
            fetch('https://v3.football.api-sports.io/coachs/squads?team=33', {
                "method": "GET",
                "headers": {
                    "x-rapidapi-host": "v3.football.api-sports.io",
                    "x-rapidapi-key": "19ca6ef50amshb9e9bbbc427749ap1b1644jsn062d3ee"
                }
            })
                .then(response => response.json())
                .then(data => {
                    const coaches = data.response;

                    const manUtdCoach = coaches.find(coach => {
                        return coach.team.id == 33 && coach.career[0].end == null;
                    });

                    if (manUtdCoach) {
                        const cardsContainer = document.getElementById('coach-cardsContainer');

                        const minip = document.createElement('div');
                        minip.classList.add('minip');

                        const mg = document.createElement('div');
                        mg.classList.add('mg');

                        const clr = document.createElement('div');
                        clr.classList.add('clr');

                        const group = document.createElement('div');
                        group.classList.add('group');

                        const span = document.createElement('span');

                        const av = document.createElement('div');
                        av.classList.add('av');
                        av.style.backgroundImage = `url('Images/Players/${manUtdCoach.id}.png')`;

                        const info = document.createElement('div');
                        info.classList.add('info');

                        const name = document.createElement('name');
                        name.innerText = `${manUtdCoach.name}`;

                        const deets = document.createElement('deets');
                        const startDate = new Date(manUtdCoach.career[0].start).toLocaleDateString('en-US');
                        deets.innerHTML = `Age: ${manUtdCoach.age}<br><br>Date hired: ${startDate}`;

                        group.appendChild(span);
                        mg.appendChild(clr);
                        mg.appendChild(group);
                        minip.appendChild(mg);
                        minip.appendChild(av);
                        info.appendChild(name);
                        info.appendChild(deets);
                        minip.appendChild(info);

                        cardsContainer.appendChild(minip);
                    } else {
                        console.log('No coach currently managing Manchester United found.');
                    }
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }

        fetchAllPlayers();
        fetchCoach();
    </script>
</body>

</html>