<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Man Utd</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <script src="API-football-data.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>

    <section id="header">

        <a id="navbar" href="index.html"><img src="Images/ManchesterUnitedLogo.png" width="80px" height="80px"
                class="Logo" alt="Team Logo"></a>
        <div>
            <ul id="navbar">
                <li><a class="active" href="index.html">Home</a></li>
                <li><a href="Shop.html">Shop</a></li>
                <li><a href="Tickets.html">Tickets</a></li>
                <li><a href="News.html">News</a></li>
                <li><a href="Players.html">Players</a></li>
                <li><a href="About.html">About</a></li>
                <li><a href="SignIn.html"><img src="Images/ProfileDefault.png" width="30px" height="30px"
                            alt="Profile Logo"></a></li>
            </ul>
        </div>

    </section>

    <div class="news-background">
        <img src="Images/News-background.jpg" alt="Manchester-United-Crest-Background">
        <div class="news-img-overlay">
            <h2>All Matches</h2>
        </div>
        <div id="breakbar"></div>

    </div>
    <section>
        <div id="matchestext">
            <h2 id="headertext">Matches</h2>
            <span><a class="see-All" href="News.html">Go Back</a></span>
        </div>
        <div class="matches-grid" id="all-matches-grid"></div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="footer-col">
                    <h4>Account</h4>
                    <ul>
                        <li><a id="login-footer" href="SignIn.html">Login</a></li>
                        <li><a id="login-footer" href="SignIn.html">Sign up</a></li>
                        <li><a href="#">privacy policy</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Accessibility</h4>
                    <ul>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="About.html">History</a></li>
                        <li><a href="About.html">Old Trafford</a></li>
                        <li><a href="About.html">Legends</a></li>
                        <li><a href="More.html">Matches</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>online shop</h4>
                    <ul>
                        <li><a href="Tickets.html">Tickets</a></li>
                        <li><a href="Shop.html">Merch</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>follow us</h4>
                    <div class="social-links">
                        <a href="https://www.facebook.com/manchesterunited"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://twitter.com/ManUtd"><i class="fab fa-x"></i></a>
                        <a href="http://instagram.com/manchesterunited"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.youtube.com/manutd"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <script>
        function fetchAllMatches() {
            fetch("https://v3.football.api-sports.io/fixtures?season=2023&team=33", {
                "method": "GET",
                "headers": {
                    "x-rapidapi-host": "v3.football.api-sports.io",
                    "x-rapidapi-key": "9018c9b2e5a0a36e4fafdebc1ac7daa6"
                }
            })
                .then(response => response.json())
                .then(data => {
                    const scrollpane = document.getElementById('all-matches-grid');

                    const allMatches = data.response;
                    allMatches.forEach(matchData => {
                        const containerMatch = createContainerMatch(matchData);
                        scrollpane.appendChild(containerMatch);
                    });
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        function createContainerMatch(matchData) {
            const containerMatch = document.createElement('div');
            containerMatch.classList.add('container-match');

            const card = document.createElement('div');
            card.classList.add('card');

            const cardTitle = document.createElement('div');
            cardTitle.classList.add('card_title');

            const h1 = document.createElement('h1');
            if (matchData.fixture.status.long === 'Match Finished') {
                h1.textContent = 'Match finished';
            } else if (matchData.fixture.status.short === 'NS') {
                h1.textContent = 'Upcoming Match';
            } else {
                h1.textContent = 'Live Match';
            }
            cardTitle.appendChild(h1);

            const matchLocation = document.createElement('p');
            matchLocation.id = 'match_type';
            matchLocation.textContent = matchData.fixture.venue.name;
            cardTitle.appendChild(matchLocation);

            const matchInfo = document.createElement('div');
            matchInfo.classList.add('match_info');

            const teamName = document.createElement('div');
            teamName.classList.add('team_name');

            const homeTeamDiv = createTeamDiv(matchData.teams.home, "team1");
            const awayTeamDiv = createTeamDiv(matchData.teams.away, "team2");

            teamName.appendChild(homeTeamDiv);
            teamName.appendChild(awayTeamDiv);

            const vs = document.createElement('div');
            vs.classList.add('vs');
            vs.innerHTML = '<p>vs</p>';

            const dateTime = document.createElement('div');
            dateTime.classList.add('date_time');
            dateTime.innerHTML = `<p>${new Date(matchData.fixture.date).toLocaleDateString()}</p>
                                    <p>${new Date(matchData.fixture.date).toLocaleTimeString()}</p>`;

            matchInfo.appendChild(teamName);
            matchInfo.appendChild(vs);
            matchInfo.appendChild(dateTime);

            const seeDetails = document.createElement('div');
            seeDetails.classList.add('seeDetails');

            if (matchData.fixture.status.long === 'Match Finished') {
                const timeNumber = document.createElement('span');
                timeNumber.id = 'timeNumber';
                timeNumber.textContent = matchData.goals.home + " - " + matchData.goals.away + " FT";
                seeDetails.appendChild(timeNumber);
            } else if (matchData.fixture.status.short === 'NS') {
                const infoButtonDiv = document.createElement('div');
                infoButtonDiv.classList.add('info-button');
                const infoButton = document.createElement('a');
                infoButton.id = 'match-button';
                infoButton.href = 'Tickets.html';
                infoButton.tabIndex = '0';
                infoButton.textContent = 'BUY TICKETS';
                infoButtonDiv.appendChild(infoButton);
                seeDetails.appendChild(infoButtonDiv);
            } else {
                const timeNumber = document.createElement('span');
                timeNumber.id = 'timeNumber';
                timeNumber.textContent = matchData.goals.home + " - " + matchData.goals.away + "\t" + matchData.fixture.status.elapsed;
                const livetimeanimation = document.createElement('span');
                livetimeanimation.id = 'livetimeanimation';
                livetimeanimation.textContent = "'";
                timeNumber.appendChild(livetimeanimation);
                seeDetails.appendChild(timeNumber);
            }

            card.appendChild(cardTitle);
            card.appendChild(matchInfo);
            card.appendChild(seeDetails);

            containerMatch.appendChild(card);

            return containerMatch;
        }

        function createTeamDiv(team, teamNum) {
            const teamDiv = document.createElement('div');
            teamDiv.classList.add(teamNum);

            const teamLogo = document.createElement('img');
            teamLogo.src = team.logo;
            teamLogo.alt = '';

            const teamName = document.createElement('h3');
            teamName.textContent = team.name;

            teamDiv.appendChild(teamLogo);
            teamDiv.appendChild(teamName);

            return teamDiv;
        }
        fetchAllMatches();
    </script>
</body>

</html>