<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Man Utd</title>
    <link rel="stylesheet" href="BuyPage.css" />
    <script src="BuyPage.js"></script>
    <script src="API-football-data.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  </head>

  <body>
    <section id="header">
      <a id="navbar" href="index.html"
        ><img
          src="Images/ManchesterUnitedLogo.png"
          width="80px"
          height="80px"
          class="Logo"
          alt="Team Logo"
      /></a>
      <div>
        <ul id="navbar">
          <li><a href="index.html">Home</a></li>
          <li><a href="Shop.html">Shop</a></li>
          <li><a href="Tickets.html">Tickets</a></li>
          <li><a href="News.html">News</a></li>
          <li><a href="Players.html">Players</a></li>
          <li><a href="About.html">About</a></li>
          <li>
            <a href="SignIn.html"
              ><img
                src="Images/ProfileDefault.png"
                width="30px"
                height="30px"
                alt="Profile Logo"
            /></a>
          </li>
        </ul>
      </div>
    </section>

    <section class="Bform">
      <div class="booking_form">
        <form name="booking" id="booking">
          <div class="row">
            <div class="column">
              <h3 class="title">Personal Information</h3>
              <div class="input">
                <span>Full name</span>
                <input type="'text" placeholder="Name" name="name" />
                <div class="error" id="nameErr"></div>
              </div>

              <div class="input">
                <span>Email</span>
                <input type="text" placeholder="Email" name="email" />
                <div class="error" id="emailErr"></div>
              </div>

              <div class="input">
                <span>Address</span>
                <input type="text" placeholder="street no." name="Address" />
                <div class="error" id="addressErr"></div>
              </div>

              <div class="input">
                <span>City</span>
                <input type="text" placeholder="cairo" name="city" />
                <div class="error" id="cityErr"></div>
              </div>

              <div class="flex">
                <div class="input">
                  <span>State</span>
                  <input type="text" placeholder="Egypt" name="country" />
                  <div class="error" id="countryErr"></div>
                </div>
                <div class="input">
                  <span>Zip Code</span>
                  <input type="number" placeholder="234 856" name="zipcode" />
                  <div class="error" id="zipErr"></div>
                </div>
              </div>
            </div>

            <div class="column">
              <h3 class="title">Payment</h3>
              <div class="input">
                <span>Cards Accepted</span>
                <img src="Images/imgcards.png" />
              </div>

              <div class="input">
                <span>Name On Card</span>
                <input type="text" placeholder="Name" name="nameoncard" />
                <div class="error" id="cardnameErr"></div>
              </div>

              <div class="input">
                <span>Credit Card number</span>
                <input type="text" placeholder="number" name="cardnumber" />
                <div class="error" id="cardnumberErr"></div>
              </div>

              <div class="input">
                <span>Exp. Month</span>
                <input type="text" placeholder="From 1 to 12" name="expmonth" />
                <div class="error" id="expmonthErr"></div>
              </div>

              <div class="flex">
                <div class="input">
                  <span>Exp. Year</span>
                  <input type="number" placeholder="2025" name="expyear" />
                  <div class="error" id="expyearErr"></div>
                </div>
                <div class="input">
                  <span>CVV</span>
                  <input type="text" placeholder="526" name="cvv" />
                  <div class="error" id="cvvErr"></div>
                </div>
              </div>
            </div>
          </div>

          <button
            type="submit"
            class="btn"
            value="Submit"
            onclick="validate()">
            Checkout
          </button>


        </form>
      </div>
    </section>
    <script>
      function isValid(){
          var name = document.forms["booking"]["name"].value.trim();
          var email = document.forms["booking"]["email"].value.trim();
          var address = document.forms["booking"]["Address"].value.trim();
          var city = document.forms["booking"]["city"].value.trim();
          var country = document.forms["booking"]["country"].value.trim();
          var zipcode = document.forms["booking"]["zipcode"].value.trim();
          var nameoncard = document.forms["booking"]["nameoncard"].value.trim();
          var cardnumber = document.forms["booking"]["cardnumber"].value.trim();
          var month = document.forms["booking"]["expmonth"].value.trim();
          var year = document.forms["booking"]["expyear"].value.trim();
          var cvv = document.forms["booking"]["cvv"].value.trim();

          var nameError = document.getElementById("nameErr");
          var emailError = document.getElementById("emailErr");
          var addressError = document.getElementById("addressErr");
          var cityError = document.getElementById("cityErr");
          var countryError = document.getElementById("countryErr");
          var zipError = document.getElementById("zipErr");
          var cardnameError = document.getElementById("cardnameErr");
          var cardnumberError = document.getElementById("cardnumberErr");
          var monthError = document.getElementById("expmonthErr");
          var yearError = document.getElementById("expyearErr");
          var cvvErr = document.getElementById("cvvErr");

          nameError.style.display = "none";
          emailError.style.display = "none";
          addressError.style.display = "none";
          cityError.style.display = "none";
          countryError.style.display = "none";
          zipError.style.display = "none";
          cardnameError.style.display = "none";
          monthError.style.display = "none";
          yearError.style.display = "none";
          cardnumberError.style.display = "none";

          var isValid = true;

          if (!name) {
            nameError.innerHTML = "Please enter your name";
            nameError.style.display = "block";
            isValid = false;
          } else if (!/^[a-zA-Z ]+$/.test(name)) {
            nameError.innerHTML =
              "Name cannot contain special characters or numbers";
            nameError.style.display = "block";
            isValid = false;
          }

          if (!email) {
            emailError.innerHTML = "Please enter your email";
            emailError.style.display = "block";
            isValid = false;
          } else if (!isValidEmail(email)) {
            emailError.innerHTML = "Please enter a valid email address";
            emailError.style.display = "block";
            isValid = false;
          }

          if (!address) {
            addressError.innerHTML = "Please enter your address";
            addressError.style.display = "block";
            isValid = false;
          }

          if (!city) {
            cityError.innerHTML = "Please enter your city";
            cityError.style.display = "block";
            isValid = false;
          } else if (!/^[a-zA-Z ]+$/.test(city)) {
            cityError.innerHTML =
              "City cannot contain special characters or numbers";
            cityError.style.display = "block";
            isValid = false;
          }

          if (!country) {
            countryError.innerHTML = "Please enter your country";
            countryError.style.display = "block";
            isValid = false;
          } else if (!/^[a-zA-Z ]+$/.test(country)) {
            countryError.innerHTML =
              "Country cannot contain special characters or numbers";
            countryError.style.display = "block";
            isValid = false;
          }

          if (!zipcode) {
            zipError.innerHTML = "Please enter the zipcode";
            zipError.style.display = "block";
            isValid = false;
          } else if (!/^[0-9]{1,6}$/.test(zipcode) || zipcode.length != 6) {
            zipError.innerHTML = "Invalid zipcode";
            zipError.style.display = "block";
            isValid = false;
          }

          if (!nameoncard) {
            cardnameError.innerHTML = "Please enter card name";
            cardnameError.style.display = "block";
            isValid = false;
          } else if (!/^[a-zA-Z ]+$/.test(nameoncard)) {
            cardnameError.innerHTML =
              "Card name cannot contain special characters or numbers";
            cardnameError.style.display = "block";
            isValid = false;
          }

          if (!cardnumber) {
            cardnumberError.innerHTML = "Please enter the card number";
            cardnumberError.style.display = "block";
            isValid = false;
          } else if (!/^([0-9]{4}[\s-]?){3}([0-9]{4})$/.test(cardnumber)) {
            cardnumberError.innerHTML = "Invalid card number";
            cardnumberError.style.display = "block";
            isValid = false;
          }

          if (!month) {
            monthError.innerHTML = "Please enter the month";
            monthError.style.display = "block";
            isValid = false;
          } else if (
            !/^[1-9]$|^[1][0-2]$/.test(month) ||
            parseInt(month) < 1 ||
            parseInt(month) > 12
          ) {
            monthError.innerHTML = "Month must be a number between 1 and 12";
            monthError.style.display = "block";
            isValid = false;
          }

          if (!year) {
            yearError.innerHTML = "Please enter the year";
            yearError.style.display = "block";
            isValid = false;
          } else if (!/^\d{4}$/.test(year)) {
            yearError.innerHTML = "Year must be a valid 4-digit number";
            yearError.style.display = "block";
            isValid = false;
          }

          if (!cvv) {
            cvvErr.innerHTML = "Please enter the CVV";
            cvvErr.style.display = "block";
            isValid = false;
          } else if (!/^[0-9]{3,4}$/.test(cvv)) {
            cvvErr.innerHTML = "Invalid CVV";
            cvvErr.style.display = "block";
            isValid = false;
          }



          return isValid;
        }

      
      function isValidEmail(email) {
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }
      function validate(){
        event.preventDefault();
      if (isValid()) {
            alert("Order has been placed successfully!");
                history.back();
              
          }
        }
    </script>
  </body>
</html>
